# RT-002: start.md as Central Orchestrator

**Status**: draft
**Priority**: medium
**Category**: Roundtable
**Created**: 2026-01-11
**Updated**: 2026-01-11

## Context

Currently, specs.md, design.md, and brainstorm.md have significant code duplication (~60%). Each implements:
- Context gathering
- S2S validation
- Argument parsing
- Config loading
- Session setup
- Roundtable loop
- Output generation

The proposal is to have a central `roundtable/start.md` that handles the common roundtable execution, while workflow-specific commands only configure parameters.

## Proposal

### 1. Central start.md

- Handles all common roundtable logic
- Receives configuration from calling command
- Manages facilitator/participant orchestration

### 2. Workflow Commands as Configurators

```
specs.md:
  1. Parse workflow-specific args (--format, etc.)
  2. Set workflow config:
     - type: "specs"
     - strategy: "consensus-driven"
     - participants: [pm, ba, qa]
     - agenda: specs-agenda
  3. Delegate to start.md
  4. Post-process output (generate requirements.md)
```

### 3. Smart Routing

- `/s2s:roundtable "define API requirements"`
- start.md analyzes topic, detects "specs" intent
- Routes to specs workflow automatically

### 4. Shared Utilities

- Validation logic
- Session file management
- Agent invocation patterns
- Output formatting

### Files to Modify
- `commands/roundtable/start.md` (new or major rewrite)
- `commands/specs.md` (reduce to configuration)
- `commands/design.md` (reduce to configuration)
- `commands/brainstorm.md` (reduce to configuration)

## Acceptance Criteria

- [ ] start.md handles common roundtable logic
- [ ] Workflow commands reduced to configuration + post-processing
- [ ] Code duplication eliminated
- [ ] All existing functionality preserved
- [ ] Smart routing works for clear cases

## Related

- Related to: RT-001 (Phases) - phases logic would be in start.md
- Related to: SESS-001 (Resume) - resume logic centralized
- Supersedes: Old P2-4

## Open Questions

- How to handle workflow-specific edge cases?
- Is smart routing reliable enough or confusing?
- Migration path from current structure?
- How to test this refactoring safely?

## Notes

This is a significant refactoring that should be done carefully. Consider:
1. Extract common code first without changing behavior
2. Then centralize into start.md
3. Thorough testing at each step
