# RT-004: Context-Aware Roundtable Splitting

**Status**: draft
**Priority**: low
**Category**: Roundtable
**Created**: 2026-01-11
**Updated**: 2026-01-11

## Context

Large projects with extensive requirements or complex architecture can overwhelm a single roundtable session. Context limits are reached, quality degrades, and discussions become unfocused.

Benefits of splitting:
- Maintain context quality across large projects
- Focused discussions per topic area
- Clear boundaries for `/compact` or `/clear`

## Proposal

### 1. Context Size Assessment

- Before roundtable start, estimate total context size
- Count: CONTEXT.md size, existing artifacts, agenda items
- Threshold: If estimated size > X tokens, suggest split

### 2. Split Suggestions

```
"This project has extensive context (est. 50k tokens).
Suggest splitting into focused sessions:
1. Core domain requirements (3-4 rounds)
2. Integration requirements (2-3 rounds)
3. Non-functional requirements (2-3 rounds)

Proceed with split? [Y/n]"
```

### 3. Session Linking

- Child sessions reference parent
- Artifacts from session 1 available to session 2
- Final merge of all session outputs

### 4. Automatic Compaction

- Between sessions, run `/compact`
- Summarize previous session for next
- Keep only essential artifacts in context

### Files to Modify
- `commands/specs.md`, `design.md`, `brainstorm.md`
- Session file schema (parent_session, linked_sessions)

## Acceptance Criteria

- [ ] Context size estimation works
- [ ] Split suggestion appears for large projects
- [ ] Sessions can be linked
- [ ] Compaction between sessions

## Related

- Related to: RT-001 (Phases) - phases are intra-session, splits are inter-session
- Related to: CTX-001 (Context Reduction)

## Open Questions

- What's the right threshold for suggesting split?
- How to determine optimal split points?
- How to handle cross-session artifact references?
- Is automatic compaction reliable?

## Notes

This is a complex feature that should be implemented after phases (RT-001) and context reduction (CTX-001) are stable.
